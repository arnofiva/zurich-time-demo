import{aA as t,dZ as L,av as s,dU as f,dV as T,aw as m,ax as y,gx as D}from"./index-bbf8a9f0.js";const R={BingMapsLayer:async()=>(await t(()=>import("./BingMapsLayer-d0b503a2.js"),["./BingMapsLayer-d0b503a2.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./imageBitmapUtils-5116c257.js"],import.meta.url)).default,BuildingSceneLayer:async()=>(await t(()=>import("./BuildingSceneLayer-58c095b2.js"),["./BuildingSceneLayer-58c095b2.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./BuildingComponentSublayer-611ff04f.js","./FeatureLayer-b0f395b0.js","./FeatureLayerBase-7f10fd38.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./editsZScale-9105f3f1.js","./queryZScale-d1347eb8.js","./FeatureSet-360fc98b.js","./APIKeyMixin-c4e9f1d1.js","./EditBusLayer-ef0bf759.js","./OrderedLayer-2d761fd1.js","./FeatureTemplate-e1ccee63.js","./FeatureType-7651d0c8.js","./versionUtils-8c185582.js","./TopFeaturesQuery-69f7c9d0.js","./capabilities-c607cf72.js","./I3SIndexInfo-32fe1774.js","./I3SLayerDefinitions-0ca10459.js","./I3SUtil-2edfd1c0.js","./I3SBinaryReader-de922cf7.js","./popupUtils-192c1389.js","./BuildingGroupSublayer-a2a036db.js","./SceneService-d7fc8660.js","./elevationInfoUtils-47341dd3.js"],import.meta.url)).default,CSVLayer:async()=>(await t(()=>import("./CSVLayer-f3444c48.js"),["./CSVLayer-f3444c48.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./FeatureLayer-b0f395b0.js","./FeatureLayerBase-7f10fd38.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./editsZScale-9105f3f1.js","./queryZScale-d1347eb8.js","./FeatureSet-360fc98b.js","./APIKeyMixin-c4e9f1d1.js","./EditBusLayer-ef0bf759.js","./OrderedLayer-2d761fd1.js","./FeatureTemplate-e1ccee63.js","./FeatureType-7651d0c8.js","./versionUtils-8c185582.js","./TopFeaturesQuery-69f7c9d0.js","./clientSideDefaults-62a030da.js","./QueryEngineCapabilities-85c4f1d0.js"],import.meta.url)).default,DimensionLayer:async()=>(await t(()=>import("./DimensionLayer-b5e6744f.js"),["./DimensionLayer-b5e6744f.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./Analysis-4f3be62b.js","./LengthDimension-766c257d.js"],import.meta.url)).default,ElevationLayer:async()=>(await t(()=>import("./ElevationLayer-4e135f35.js"),["./ElevationLayer-4e135f35.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./ArcGISCachedService-a8418e81.js","./TileInfoTilemapCache-b2f420a4.js","./TilemapCache-0e21be4e.js"],import.meta.url)).default,FeatureLayer:async()=>(await t(()=>import("./FeatureLayer-b0f395b0.js"),["./FeatureLayer-b0f395b0.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./FeatureLayerBase-7f10fd38.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./editsZScale-9105f3f1.js","./queryZScale-d1347eb8.js","./FeatureSet-360fc98b.js","./APIKeyMixin-c4e9f1d1.js","./EditBusLayer-ef0bf759.js","./OrderedLayer-2d761fd1.js","./FeatureTemplate-e1ccee63.js","./FeatureType-7651d0c8.js","./versionUtils-8c185582.js","./TopFeaturesQuery-69f7c9d0.js"],import.meta.url)).default,GeoJSONLayer:async()=>(await t(()=>import("./GeoJSONLayer-ac90fb77.js"),["./GeoJSONLayer-ac90fb77.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./clientSideDefaults-62a030da.js","./QueryEngineCapabilities-85c4f1d0.js","./FeatureSet-360fc98b.js","./OrderedLayer-2d761fd1.js","./FeatureTemplate-e1ccee63.js","./FeatureType-7651d0c8.js"],import.meta.url)).default,GeoRSSLayer:async()=>(await t(()=>import("./GeoRSSLayer-db7e3608.js"),["./GeoRSSLayer-db7e3608.js","./index-bbf8a9f0.js","./index-fa8fa232.css"],import.meta.url)).default,GroupLayer:async()=>(await t(()=>import("./GroupLayer-556047ed.js"),["./GroupLayer-556047ed.js","./index-bbf8a9f0.js","./index-fa8fa232.css"],import.meta.url)).default,ImageryLayer:async()=>(await t(()=>import("./ImageryLayer-81ac4ca5.js"),["./ImageryLayer-81ac4ca5.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./ImageHistogramParameters-15702285.js","./dataUtils-fd69d353.js","./pixelRangeUtils-367cd051.js","./generateRendererUtils-c6e4de1b.js","./FeatureSet-360fc98b.js","./imageBitmapUtils-5116c257.js","./executeQueryJSON-25de0f04.js","./query-65baef3e.js","./pbfQueryUtils-97d4b760.js","./pbf-c2795c5e.js","./queryZScale-d1347eb8.js","./AttachmentInfo-be99153c.js","./executeForIds-89da7f6c.js","./TopFeaturesQuery-69f7c9d0.js","./versionUtils-8c185582.js"],import.meta.url)).default,ImageryTileLayer:async()=>(await t(()=>import("./ImageryTileLayer-9a3d1a06.js"),["./ImageryTileLayer-9a3d1a06.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./ImageHistogramParameters-15702285.js","./dataUtils-fd69d353.js","./pixelRangeUtils-367cd051.js","./generateRendererUtils-c6e4de1b.js","./FeatureSet-360fc98b.js","./rasterProjectionHelper-6d126fbf.js","./utils-9854efee.js","./TilemapCache-0e21be4e.js"],import.meta.url)).default,IntegratedMeshLayer:async()=>(await t(()=>import("./IntegratedMeshLayer-8d4cd32b.js"),["./IntegratedMeshLayer-8d4cd32b.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./persistable-a6e8e1c0.js","./resourceExtension-718cef0d.js","./APIKeyMixin-c4e9f1d1.js","./SceneService-d7fc8660.js","./I3SIndexInfo-32fe1774.js","./I3SLayerDefinitions-0ca10459.js","./SceneModification-c1454174.js","./elevationInfoUtils-47341dd3.js"],import.meta.url)).default,KMLLayer:async()=>(await t(()=>import("./KMLLayer-653a99d4.js"),["./KMLLayer-653a99d4.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./FeatureSet-360fc98b.js"],import.meta.url)).default,LineOfSightLayer:async()=>(await t(()=>import("./LineOfSightLayer-609e8611.js"),["./LineOfSightLayer-609e8611.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./Analysis-4f3be62b.js","./LineOfSightAnalysisTarget-31e75ca4.js","./persistable-a6e8e1c0.js","./resourceExtension-718cef0d.js","./elevationInfoUtils-47341dd3.js"],import.meta.url)).default,LinkChartLayer:async()=>(await t(()=>import("./LinkChartLayer-4021072e.js"),["./LinkChartLayer-4021072e.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./geohashUtils-77d8429b.js","./FeatureStore-4933e4f2.js","./BoundsStore-adbd6b3d.js","./PooledRBush-6aa8242b.js","./quickselect-c60d89a3.js","./QueryEngine-f0498edf.js","./WhereClause-201f4663.js","./TimeOnly-58cd9599.js","./json-48e3ea08.js","./QueryEngineCapabilities-85c4f1d0.js","./utils-22c50f5f.js","./utils-a6d73f0b.js","./generateRendererUtils-c6e4de1b.js","./optimizedFeatureQueryEngineAdapter-05dc7562.js","./clientSideDefaults-62a030da.js","./FeatureSet-360fc98b.js"],import.meta.url)).default,MapImageLayer:async()=>(await t(()=>import("./MapImageLayer-52c51ba0.js"),["./MapImageLayer-52c51ba0.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./APIKeyMixin-c4e9f1d1.js","./SublayersOwner-6de2f2c7.js","./QueryTask-08378675.js","./executeForIds-89da7f6c.js","./query-65baef3e.js","./pbfQueryUtils-97d4b760.js","./pbf-c2795c5e.js","./queryZScale-d1347eb8.js","./executeQueryJSON-25de0f04.js","./FeatureSet-360fc98b.js","./executeQueryPBF-788fe066.js","./FeatureType-7651d0c8.js","./FeatureTemplate-e1ccee63.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./sublayerUtils-0fcbcc2f.js","./ExportImageParameters-f62cbecd.js","./floorFilterUtils-73949d2d.js","./imageBitmapUtils-5116c257.js","./versionUtils-8c185582.js"],import.meta.url)).default,MapNotesLayer:async()=>(await t(()=>import("./MapNotesLayer-ba3be2ca.js"),["./MapNotesLayer-ba3be2ca.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./FeatureLayer-b0f395b0.js","./FeatureLayerBase-7f10fd38.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./editsZScale-9105f3f1.js","./queryZScale-d1347eb8.js","./FeatureSet-360fc98b.js","./APIKeyMixin-c4e9f1d1.js","./EditBusLayer-ef0bf759.js","./OrderedLayer-2d761fd1.js","./FeatureTemplate-e1ccee63.js","./FeatureType-7651d0c8.js","./versionUtils-8c185582.js","./TopFeaturesQuery-69f7c9d0.js","./objectIdUtils-967fafff.js"],import.meta.url)).default,MediaLayer:async()=>(await t(()=>import("./MediaLayer-f54e777b.js"),["./MediaLayer-f54e777b.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./MediaElementView-0e627226.js","./normalizeUtilsSync-57c231f7.js","./resourceExtension-718cef0d.js","./BoundsStore-adbd6b3d.js","./PooledRBush-6aa8242b.js","./quickselect-c60d89a3.js"],import.meta.url)).default,OGCFeatureLayer:async()=>(await t(()=>import("./OGCFeatureLayer-3122ef2e.js"),["./OGCFeatureLayer-3122ef2e.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./ogcFeatureUtils-9ee280c1.js","./geojson-288e7126.js","./date-430969b3.js","./clientSideDefaults-62a030da.js","./QueryEngineCapabilities-85c4f1d0.js","./FeatureSet-360fc98b.js","./APIKeyMixin-c4e9f1d1.js","./OrderedLayer-2d761fd1.js","./FeatureType-7651d0c8.js","./FeatureTemplate-e1ccee63.js"],import.meta.url)).default,OpenStreetMapLayer:async()=>(await t(()=>import("./OpenStreetMapLayer-87a790e2.js"),["./OpenStreetMapLayer-87a790e2.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./WebTileLayer-ac91c3a7.js","./imageBitmapUtils-5116c257.js"],import.meta.url)).default,OrientedImageryLayer:async()=>(await t(()=>import("./OrientedImageryLayer-00a621a3.js"),["./OrientedImageryLayer-00a621a3.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./FeatureLayer-b0f395b0.js","./FeatureLayerBase-7f10fd38.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./editsZScale-9105f3f1.js","./queryZScale-d1347eb8.js","./FeatureSet-360fc98b.js","./APIKeyMixin-c4e9f1d1.js","./EditBusLayer-ef0bf759.js","./OrderedLayer-2d761fd1.js","./FeatureTemplate-e1ccee63.js","./FeatureType-7651d0c8.js","./versionUtils-8c185582.js","./TopFeaturesQuery-69f7c9d0.js"],import.meta.url)).default,PointCloudLayer:async()=>(await t(()=>import("./PointCloudLayer-df33696a.js"),["./PointCloudLayer-df33696a.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./APIKeyMixin-c4e9f1d1.js","./SceneService-d7fc8660.js","./I3SIndexInfo-32fe1774.js","./PointCloudUniqueValueRenderer-7a8f5577.js","./elevationInfoUtils-47341dd3.js"],import.meta.url)).default,RouteLayer:async()=>(await t(()=>import("./RouteLayer-f33cd31c.js"),["./RouteLayer-f33cd31c.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./Stop-01c03e02.js","./FeatureSet-360fc98b.js"],import.meta.url)).default,SceneLayer:async()=>(await t(()=>import("./SceneLayer-7490228f.js"),["./SceneLayer-7490228f.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./APIKeyMixin-c4e9f1d1.js","./EditBusLayer-ef0bf759.js","./SceneService-d7fc8660.js","./I3SIndexInfo-32fe1774.js","./capabilities-c607cf72.js","./I3SLayerDefinitions-0ca10459.js","./LayerFloorInfo-1f0f020d.js","./persistable-a6e8e1c0.js","./resourceExtension-718cef0d.js","./elevationInfoUtils-47341dd3.js","./I3SUtil-2edfd1c0.js","./I3SBinaryReader-de922cf7.js","./popupUtils-192c1389.js"],import.meta.url)).default,StreamLayer:async()=>(await t(()=>import("./index-bbf8a9f0.js").then(e=>e.y8),["./index-bbf8a9f0.js","./index-fa8fa232.css"],import.meta.url)).default,SubtypeGroupLayer:async()=>(await t(()=>import("./SubtypeGroupLayer-7ef9769d.js"),["./SubtypeGroupLayer-7ef9769d.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./APIKeyMixin-c4e9f1d1.js","./EditBusLayer-ef0bf759.js","./FeatureLayerBase-7f10fd38.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./FeatureTemplate-e1ccee63.js","./versionUtils-8c185582.js"],import.meta.url)).default,TileLayer:async()=>(await t(()=>import("./TileLayer-0af7fef8.js"),["./TileLayer-0af7fef8.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./APIKeyMixin-c4e9f1d1.js","./ArcGISCachedService-a8418e81.js","./TileInfoTilemapCache-b2f420a4.js","./TilemapCache-0e21be4e.js","./SublayersOwner-6de2f2c7.js","./QueryTask-08378675.js","./executeForIds-89da7f6c.js","./query-65baef3e.js","./pbfQueryUtils-97d4b760.js","./pbf-c2795c5e.js","./queryZScale-d1347eb8.js","./executeQueryJSON-25de0f04.js","./FeatureSet-360fc98b.js","./executeQueryPBF-788fe066.js","./FeatureType-7651d0c8.js","./FeatureTemplate-e1ccee63.js","./LayerFloorInfo-1f0f020d.js","./serviceCapabilitiesUtils-a2b8d6ed.js","./sublayerUtils-0fcbcc2f.js","./imageBitmapUtils-5116c257.js"],import.meta.url)).default,UnknownLayer:async()=>(await t(()=>import("./UnknownLayer-f02a0140.js"),["./UnknownLayer-f02a0140.js","./index-bbf8a9f0.js","./index-fa8fa232.css"],import.meta.url)).default,UnsupportedLayer:async()=>(await t(()=>import("./UnsupportedLayer-999d001e.js"),["./UnsupportedLayer-999d001e.js","./index-bbf8a9f0.js","./index-fa8fa232.css"],import.meta.url)).default,VectorTileLayer:async()=>(await t(()=>import("./VectorTileLayer-a2520855.js"),["./VectorTileLayer-a2520855.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./APIKeyMixin-c4e9f1d1.js","./ArcGISCachedService-a8418e81.js","./TileInfoTilemapCache-b2f420a4.js","./TilemapCache-0e21be4e.js","./jsonContext-accddd07.js","./StyleRepository-5d2a3251.js","./TileClipper-ae6eca9e.js","./definitions-7fe559af.js"],import.meta.url)).default,VoxelLayer:async()=>(await t(()=>import("./VoxelLayer-8376cb85.js"),["./VoxelLayer-8376cb85.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./APIKeyMixin-c4e9f1d1.js","./SceneService-d7fc8660.js","./I3SIndexInfo-32fe1774.js","./persistable-a6e8e1c0.js","./resourceExtension-718cef0d.js"],import.meta.url)).default,WFSLayer:async()=>(await t(()=>import("./WFSLayer-7dad15f4.js"),["./WFSLayer-7dad15f4.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./clientSideDefaults-62a030da.js","./QueryEngineCapabilities-85c4f1d0.js","./wfsUtils-b4cd1585.js","./geojson-288e7126.js","./date-430969b3.js","./xmlUtils-444cb4c0.js","./FeatureSet-360fc98b.js","./OrderedLayer-2d761fd1.js"],import.meta.url)).default,WMSLayer:async()=>(await t(()=>import("./WMSLayer-db0863cc.js"),["./WMSLayer-db0863cc.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./crsUtils-3bab3d8c.js","./ExportWMSImageParameters-9a39d90d.js","./imageBitmapUtils-5116c257.js"],import.meta.url)).default,WMTSLayer:async()=>(await t(()=>import("./WMTSLayer-f8868f5c.js"),["./WMTSLayer-f8868f5c.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./WebTileLayer-ac91c3a7.js","./imageBitmapUtils-5116c257.js","./TileInfoTilemapCache-b2f420a4.js","./crsUtils-3bab3d8c.js","./xmlUtils-444cb4c0.js"],import.meta.url)).default,WebTileLayer:async()=>(await t(()=>import("./WebTileLayer-ac91c3a7.js").then(e=>e.W),["./WebTileLayer-ac91c3a7.js","./index-bbf8a9f0.js","./index-fa8fa232.css","./imageBitmapUtils-5116c257.js"],import.meta.url)).default};async function S(e,i){const r=L(e);if(!r)throw new s("invalid-url","Invalid scene service url");const a={...i,sceneServerUrl:r.url.path,layerId:r.sublayer??void 0};if(a.sceneLayerItem??(a.sceneLayerItem=await A(a)),a.sceneLayerItem==null)return p(a.sceneServerUrl.replace("/SceneServer","/FeatureServer"),a);const o=await V(a);if(!o?.url)throw new s("related-service-not-found","Could not find feature service through portal item relationship");const _=await p(o.url,a);return _.portalItem=o,_}async function A(e){const i=(await E(e)).serviceItemId;if(!i)return null;const r=new f({id:i,apiKey:e.apiKey}),a=await O(e);a!=null&&(r.portal=new T({url:a}));try{return r.load({signal:e.signal})}catch(o){return m(o),null}}async function E(e){if(e.rootDocument)return e.rootDocument;const i={query:{f:"json",token:e.apiKey},responseType:"json",signal:e.signal};try{const r=await y(e.sceneServerUrl,i);e.rootDocument=r.data}catch{e.rootDocument={}}return e.rootDocument}async function O(e){const i=D?.findServerInfo(e.sceneServerUrl);if(i?.owningSystemUrl)return i.owningSystemUrl;const r=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const a=(await y(r,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(a)return a}catch(a){m(a)}return null}async function p(e,i){const r=L(e);if(!r)throw new s("invalid-feature-service-url","Invalid feature service url");const a=r.url.path,o=i.layerId;if(o==null)return{serverUrl:a};const _=E(i),d=n=>{const I={query:{f:"json"},responseType:"json",authMode:n,signal:i.signal};return y(a,I)},v=d("anonymous").catch(()=>d("no-prompt")),[c,w]=await Promise.all([v,_]),l=w?.layers,u=c.data&&c.data.layers;if(!Array.isArray(u))throw new Error("expected layers array");if(Array.isArray(l)){for(let n=0;n<Math.min(l.length,u.length);n++)if(l[n].id===o)return{serverUrl:a,layerId:u[n].id}}else if(o!=null&&o<u.length)return{serverUrl:a,layerId:u[o].id};throw new Error("could not find matching associated sublayer")}async function V({sceneLayerItem:e,signal:i}){if(!e)return null;try{const r=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:i})).find(o=>o.type==="Feature Service")||null;if(!r)return null;const a=new f({portal:r.portal,id:r.id});return await a.load(),a}catch(r){return m(r),null}}export{R as a,S as l};
